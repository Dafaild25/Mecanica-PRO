<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
        <link rel="stylesheet" href="estilos.css">
        
    <title>Mecanica</title>
</head>
<body>
    
    <header>
        <h1 class="alert alert-dark" >
            <b>Mecánica: </b>Registro de vehiculos dañados
        </h1>
    </header>
    <main>
        <div class="container">
            <div class=" alert alert-secondary">
                <p>
                    <b>Lorem ipsum dolor sit amet consectetur adipisicing elit. A ab debitis praesentium eius autem suscipit excepturi, officiis recusandae atque dolores repellendus quod, laudantium provident consectetur exercitationem quae. Sunt, nulla deserunt.</b> 
                </p>
            </div>
            <div class="formulario">
                <form id="formulario-entrada">
                    <div class="row">
                        <div class="col-md-4">
                            <label > <b>Cédula: </b></label>
                            <input type="text" class="form-control" placeholder="Ejem: 0504126962" id="cedula" autofocus>
                            <br>
                            <label for=""> <b>Modelo de Vehiculo: </b></label>
                            <input type="text" class="form-control" placeholder="Mazda" id="modelo">
                            <br>
                            <label for=""> <b>Kilometraje: </b></label>
                            <input type="text" class="form-control" placeholder="200000" id="kilo">
                            <br>
                        </div>
                        <div class="col-md-4">
                            <label for=""> <b>Nombre: </b></label>
                            <input type="text" class="form-control" placeholder="DAVID" id="nombre">
                            <br>
                            <label for=""> <b>Placas: </b></label>
                            <input type="text" class="form-control" placeholder="Ejem: XXX-000" id="placa">
                            <br>
                            <label for=""> <b>Llanta de emergencia: </b></label>
                            <select name="" id="llanta" class="form-control" >
                                <option value="">--Seleccione--</option>
                                <option value="">SI</option>
                                <option value="">NO</option>

                            </select>
                            <br>
                        </div>
                        <div class="col-md-4">
                            <label for=""> <b>Apellido: </b></label>
                            <input type="text" class="form-control" placeholder="AIMACAÑA" id="apellido">
                            <br>
                            <label for=""> <b>Transmision: </b></label>
                            <input type="text" class="form-control" placeholder="Ejem: 0504126962"id="trans" >
                            <br>
                            <label for=""> <b>Fecha: </b></label>
                            <input type="date" class="form-control" id="fecha">
                            <br>
                        </div>
                        <div class="row">
                            <label for=""><b>Descripcion del problema:</b></label>
                            <br>
                            <br>
                            <textarea name="" id="desc" class="form-control" placeholder="cambio de aceite"></textarea>
                            <br><br>
                        </div>
                        <br><br>
                        <div class="row">
                            <div class="col-md-4">
                                <button type="submit" class="btn btn-primary" >Agregar</button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-secundary" id="Editar-al-formulario">Editar</button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-danger" id="Borrar-al-formulario">Borrar</button>
                            </div>
                        </div>
                    </div>


                </form>
            </div>


        </div>

    </main>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import {getFirestore,collection,addDoc,onSnapshot,deleteDoc,doc} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyDmcNGxG8RaJb801784o428MVlB-vCZBC8",
          authDomain: "mecanica-crud.firebaseapp.com",
          projectId: "mecanica-crud",
          storageBucket: "mecanica-crud.appspot.com",
          messagingSenderId: "617641396224",
          appId: "1:617641396224:web:dcd726762cf9cd2b1970e5"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // hago que el formulario sea una lista 

        const mecanica = document.getElementById("formulario-entrada");

        // creo una funcion para agregar
        const guardarDatos = ( cedula,nombre,apellido,modelo,placa,transmision,kilometraje,llanta,fecha,descripcion) => db.collection("Vehiculos").doc().set({
            cedula ,
            nombre,
            apellido,
            modelo,
            placa,
            transmision,
            kilometraje,
            llanta,
            fecha,
            descripcion,
        });


        mecanica.addEventListener("submit", async(e)=>{
            e.preventDefault();
            const cedula = mecanica["cedula"];
            const nombre = mecanica["nombre"];
            const apellido=  mecanica["apellido"];
            const modelo = mecanica["modelo"];
            const placa = mecanica["placa"];
            const transmision = mecanica["trans"];
            const Kilometraje = mecanica["kilo"];
            const llanta = mecanica["llanta"];
            const fecha = mecanica["fecha"];
            const descripcion = mecanica["des"];
            

            await guardarDatos(cedula.value, nombre.value, apellido.value, modelo.value, placa.value, transmision.value, Kilometraje.value, llanta.value, fecha.value, descripcion.value);
            mecanica.reset();
        } );

    </script>
    
</body>
</html>